<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Jekyll v4.2.0">
  <link type="application/atom+xml" rel="alternate" href="../../../../../feed.xml" title="Frida • A world-class dynamic instrumentation toolkit" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Frida’s master branch" href="https://github.com/frida/frida/commits/master.atom" />
  <link rel="stylesheet" href="../../../../../css/screen.css" />
  <link rel="icon" type="image/png" href="../../../../../favicon.ico" />
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Frida 15.1 Released | Frida • A world-class dynamic instrumentation toolkit</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Frida 15.1 Released" />
<meta name="author" content="hot3eed" />
<meta property="og:locale" content="en" />
<meta name="description" content="Observe and reprogram running programs on Windows, macOS, GNU/Linux, iOS, watchOS, tvOS, Android, FreeBSD, and QNX" />
<meta property="og:description" content="Observe and reprogram running programs on Windows, macOS, GNU/Linux, iOS, watchOS, tvOS, Android, FreeBSD, and QNX" />
<link rel="canonical" href="index.html" />
<meta property="og:url" content="https://frida.re/news/2021/09/03/frida-15-1-released/" />
<meta property="og:site_name" content="Frida • A world-class dynamic instrumentation toolkit" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-03T12:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Frida 15.1 Released" />
<meta name="twitter:site" content="@fridadotre" />
<meta name="twitter:creator" content="@hot3eed" />
<script type="application/ld+json">
{"headline":"Frida 15.1 Released","dateModified":"2021-09-03T12:00:00+02:00","datePublished":"2021-09-03T12:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://frida.re/news/2021/09/03/frida-15-1-released/"},"author":{"@type":"Person","name":"hot3eed"},"@type":"BlogPosting","description":"Observe and reprogram running programs on Windows, macOS, GNU/Linux, iOS, watchOS, tvOS, Android, FreeBSD, and QNX","url":"https://frida.re/news/2021/09/03/frida-15-1-released/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <script src="../../../../../js/modernizr-2.5.3.min.js"></script>
</head>


<body class="wrap">
  <header>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="../../../../../index.html">Overview</a>
  </li>
  <li class="">
    <a href="../../../../../docs/home/index.html">Docs</span></a>
  </li>
  <li class="current">
    <a href="../../../../index.html">News</a>
  </li>
  <li class="">
    <a href="https://github.com/frida/frida">Code</a>
  </li>
  <li class="">
    <a href="../../../../../contact/index.html">Contact</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <div class="logotype unit one-third center-on-mobiles">
      <a href="../../../../../index.html">
        <span>FЯIDA</span>
        <img src="../../../../../img/logotype.svg" width="205" height="39" alt="">
      </a>
    </div>
    <nav class="main-nav unit two-thirds hide-on-mobiles">
      <ul>
  <li class="">
    <a href="../../../../../index.html">Overview</a>
  </li>
  <li class="">
    <a href="../../../../../docs/home/index.html">Docs</span></a>
  </li>
  <li class="current">
    <a href="../../../../index.html">News</a>
  </li>
  <li class="">
    <a href="https://github.com/frida/frida">Code</a>
  </li>
  <li class="">
    <a href="../../../../../contact/index.html">Contact</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="news">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the blog…</option>
    <option value="/news/">Home</option>
    <optgroup label="v1.x">
      
      <option value="/news/2023/12/24/frida-16-1-10-released/">Frida 16.1.10 Released</option>
      
      <option value="/news/2023/12/20/frida-16-1-9-released/">Frida 16.1.9 Released</option>
      
      <option value="/news/2023/11/28/frida-16-1-8-released/">Frida 16.1.8 Released</option>
      
      <option value="/news/2023/11/16/frida-16-1-7-released/">Frida 16.1.7 Released</option>
      
      <option value="/news/2023/11/13/frida-16-1-6-released/">Frida 16.1.6 Released</option>
      
      <option value="/news/2023/11/04/frida-16-1-5-released/">Frida 16.1.5 Released</option>
      
      <option value="/news/2023/08/29/frida-16-1-4-released/">Frida 16.1.4 Released</option>
      
      <option value="/news/2023/07/14/frida-16-1-3-released/">Frida 16.1.3 Released</option>
      
      <option value="/news/2023/07/11/frida-16-1-2-released/">Frida 16.1.2 Released</option>
      
      <option value="/news/2023/07/01/frida-16-1-1-released/">Frida 16.1.1 Released</option>
      
      <option value="/news/2023/06/23/frida-16-1-0-released/">Frida 16.1.0 Released</option>
      
      <option value="/news/2023/04/27/frida-16-0-19-released/">Frida 16.0.19 Released</option>
      
      <option value="/news/2023/04/22/frida-16-0-18-released/">Frida 16.0.18 Released</option>
      
      <option value="/news/2023/04/19/frida-16-0-17-released/">Frida 16.0.17 Released</option>
      
      <option value="/news/2023/04/19/frida-16-0-16-released/">Frida 16.0.16 Released</option>
      
      <option value="/news/2023/04/19/frida-16-0-15-released/">Frida 16.0.15 Released</option>
      
      <option value="/news/2023/04/18/frida-16-0-14-released/">Frida 16.0.14 Released</option>
      
      <option value="/news/2023/04/15/frida-16-0-13-released/">Frida 16.0.13 Released</option>
      
      <option value="/news/2023/04/14/frida-16-0-12-released/">Frida 16.0.12 Released</option>
      
      <option value="/news/2023/03/10/frida-16-0-11-released/">Frida 16.0.11 Released</option>
      
      <option value="/news/2023/02/17/frida-16-0-10-released/">Frida 16.0.10 Released</option>
      
      <option value="/news/2023/02/11/frida-16-0-9-released/">Frida 16.0.9 Released</option>
      
      <option value="/news/2022/12/13/frida-16-0-8-released/">Frida 16.0.8 Released</option>
      
      <option value="/news/2022/12/02/frida-16-0-7-released/">Frida 16.0.7 Released</option>
      
      <option value="/news/2022/12/01/frida-16-0-6-released/">Frida 16.0.6 Released</option>
      
      <option value="/news/2022/11/28/frida-16-0-5-released/">Frida 16.0.5 Released</option>
      
      <option value="/news/2022/11/26/frida-16-0-4-released/">Frida 16.0.4 Released</option>
      
      <option value="/news/2022/11/23/frida-16-0-3-released/">Frida 16.0.3 Released</option>
      
      <option value="/news/2022/10/22/frida-16-0-2-released/">Frida 16.0.2 Released</option>
      
      <option value="/news/2022/10/08/frida-16-0-1-released/">Frida 16.0.1 Released</option>
      
      <option value="/news/2022/10/08/frida-16-0-0-released/">Frida 16.0.0 Released</option>
      
      <option value="/news/2022/07/21/frida-15-2-2-released/">Frida 15.2.2 Released</option>
      
      <option value="/news/2022/07/21/frida-15-2-1-released/">Frida 15.2.1 Released</option>
      
      <option value="/news/2022/07/21/frida-15-2-0-released/">Frida 15.2.0 Released</option>
      
      <option value="/news/2022/07/06/frida-15-1-28-released/">Frida 15.1.28 Released</option>
      
      <option value="/news/2022/06/20/frida-15-1-27-released/">Frida 15.1.27 Released</option>
      
      <option value="/news/2022/06/20/frida-15-1-26-released/">Frida 15.1.26 Released</option>
      
      <option value="/news/2022/06/18/frida-15-1-25-released/">Frida 15.1.25 Released</option>
      
      <option value="/news/2022/06/03/frida-15-1-24-released/">Frida 15.1.24 Released</option>
      
      <option value="/news/2022/05/30/frida-15-1-23-released/">Frida 15.1.23 Released</option>
      
      <option value="/news/2022/05/09/frida-15-1-22-released/">Frida 15.1.22 Released</option>
      
      <option value="/news/2022/05/06/frida-15-1-21-released/">Frida 15.1.21 Released</option>
      
      <option value="/news/2022/05/06/frida-15-1-20-released/">Frida 15.1.20 Released</option>
      
      <option value="/news/2022/05/04/frida-15-1-19-released/">Frida 15.1.19 Released</option>
      
      <option value="/news/2022/05/04/frida-15-1-18-released/">Frida 15.1.18 Released</option>
      
      <option value="/news/2022/02/10/frida-15-1-17-released/">Frida 15.1.17 Released</option>
      
      <option value="/news/2022/02/03/frida-15-1-16-released/">Frida 15.1.16 Released</option>
      
      <option value="/news/2022/02/01/frida-15-1-15-released/">Frida 15.1.15 Released</option>
      
      <option value="/news/2021/09/03/frida-15-1-released/">Frida 15.1 Released</option>
      
      <option value="/news/2021/07/18/frida-15-0-released/">Frida 15.0 Released</option>
      
      <option value="/news/2021/02/10/frida-14-2-released/">Frida 14.2 Released</option>
      
      <option value="/news/2020/12/01/frida-14-1-released/">Frida 14.1 Released</option>
      
      <option value="/news/2020/10/28/frida-14-0-released/">Frida 14.0 Released</option>
      
      <option value="/news/2020/07/24/frida-12-11-released/">Frida 12.11 Released</option>
      
      <option value="/news/2020/06/29/frida-12-10-released/">Frida 12.10 Released</option>
      
      <option value="/news/2020/05/19/frida-12-9-released/">Frida 12.9 Released</option>
      
      <option value="/news/2019/12/18/frida-12-8-released/">Frida 12.8 Released</option>
      
      <option value="/news/2019/09/18/frida-12-7-released/">Frida 12.7 Released</option>
      
      <option value="/news/2019/05/28/frida-12-6-released/">Frida 12.6 Released</option>
      
      <option value="/news/2019/05/15/nowsecure-connect-2019/">NowSecure Connect 2019</option>
      
      <option value="/news/2019/05/15/frida-12-5-released/">Frida 12.5 Released</option>
      
      <option value="/news/2018/09/11/frida-12-2-released/">Frida 12.2 Released</option>
      
      <option value="/news/2018/08/25/frida-12-1-released/">Frida 12.1 Released</option>
      
      <option value="/news/2018/07/12/frida-12-0-released/">Frida 12.0 Released</option>
      
      <option value="/news/2018/05/05/frida-11-0-released/">Frida 11.0 Released</option>
      
      <option value="/news/2018/04/28/frida-10-8-released/">Frida 10.8 Released</option>
      
      <option value="/news/2018/03/13/frida-10-7-released/">Frida 10.7 Released</option>
      
      <option value="/news/2017/09/29/frida-10-6-released/">Frida 10.6 Released</option>
      
      <option value="/news/2017/08/25/frida-10-5-released/">Frida 10.5 Released</option>
      
      <option value="/news/2017/08/15/frida-10-4-released/">Frida 10.4 Released</option>
      
      <option value="/news/2017/05/02/frida-10-0-released/">Frida 10.0 Released</option>
      
      <option value="/news/2017/01/09/frida-9-0-released/">Frida 9.0 Released</option>
      
      <option value="/news/2016/10/25/frida-8-1-released/">Frida 8.1 Released</option>
      
      <option value="/news/2016/10/04/frida-8-0-released/">Frida 8.0 Released</option>
      
      <option value="/news/2016/08/15/frida-7-3-released/">Frida 7.3 Released</option>
      
      <option value="/news/2016/06/02/frida-7-2-released/">Frida 7.2 Released</option>
      
      <option value="/news/2016/04/04/frida-7-1-released/">Frida 7.1 Released</option>
      
      <option value="/news/2016/02/24/frida-7-0-released/">Frida 7.0 Released</option>
      
      <option value="/news/2016/02/01/frida-6-2-released/">Frida 6.2 Released</option>
      
      <option value="/news/2016/01/31/frida-fosdem-presentation/">Frida presentation at FOSDEM 2016</option>
      
      <option value="/news/2016/01/14/frida-6-1-released/">Frida 6.1 Released</option>
      
      <option value="/news/2015/11/11/frida-6-0-released/">Frida 6.0 Released</option>
      
      <option value="/news/2015/09/17/frida-5-0-released/">Frida 5.0 Released</option>
      
      <option value="/news/2015/09/10/frida-4-5-released/">Frida 4.5 Released</option>
      
      <option value="/news/2015/07/31/frida-4-4-released/">Frida 4.4 Released</option>
      
      <option value="/news/2015/07/15/frida-4-3-released/">Frida 4.3 Released</option>
      
      <option value="/news/2015/06/18/frida-4-2-released/">Frida 4.2 Released</option>
      
      <option value="/news/2015/06/09/frida-4-1-released/">Frida 4.1 Released</option>
      
      <option value="/news/2015/05/09/frida-4-0-0-released/">Frida 4.0.0 Released</option>
      
      <option value="/news/2015/03/20/frida-3-0-0-released/">Frida 3.0.0 Released</option>
      
      <option value="/news/2015/03/01/frida-2-0-2-released/">Frida 2.0.2 Released</option>
      
      <option value="/news/2015/03/01/frida-2-0-1-released/">Frida 2.0.1 Released</option>
      
      <option value="/news/2015/03/01/frida-2-0-0-released/">Frida 2.0.0 Released</option>
      
      <option value="/news/2015/02/23/frida-1-8-0-released/">Frida 1.8.0 Released</option>
      
      <option value="/news/2014/11/18/frida-1-6-8-released/">Frida 1.6.8 Released</option>
      
      <option value="/news/2014/11/03/frida-1-6-7-released/">Frida 1.6.7 Released</option>
      
      <option value="/news/2014/11/03/frida-1-6-6-released/">Frida 1.6.6 Released</option>
      
      <option value="/news/2014/10/29/frida-1-6-5-released/">Frida 1.6.5 Released</option>
      
      <option value="/news/2014/10/19/frida-1-6-4-released/">Frida 1.6.4 Released</option>
      
      <option value="/news/2014/08/25/frida-1-6-3-released/">Frida 1.6.3 Released</option>
      
      <option value="/news/2014/08/03/frida-1-6-2-released/">Frida 1.6.2 Released</option>
      
      <option value="/news/2014/07/26/frida-1-6-1-released/">Frida 1.6.1 Released</option>
      
      <option value="/news/2014/05/30/frida-1-6-0-released/">Frida 1.6.0 Released</option>
      
      <option value="/news/2014/05/14/frida-1-4-2-released/">Frida 1.4.2 Released</option>
      
      <option value="/news/2014/05/14/frida-1-4-1-released/">Frida 1.4.1 Released</option>
      
      <option value="/news/2014/05/04/frida-1-4-0-released/">Frida 1.4.0 Released</option>
      
      <option value="/news/2014/04/21/frida-1-2-1-released/">Frida 1.2.1 Released</option>
      
      <option value="/news/2014/04/17/frida-1-2-0-released/">Frida 1.2.0 Released</option>
      
      <option value="/news/2014/03/09/frida-1-0-11-released/">Frida 1.0.11 Released</option>
      
      <option value="/news/2014/02/16/frida-1-0-10-released/">Frida 1.0.10 Released</option>
      
      <option value="/news/2014/01/25/frida-1-0-9-released/">Frida 1.0.9 Released</option>
      
      <option value="/news/2014/01/15/frida-1-0-8-released/">Frida 1.0.8 Released</option>
      
      <option value="/news/2014/01/12/frida-1-0-7-released/">Frida 1.0.7 Released</option>
      
      <option value="/news/2014/01/11/frida-1-0-6-released/">Frida 1.0.6 Released</option>
      
      <option value="/news/2014/01/05/frida-1-0-5-released/">Frida 1.0.5 Released</option>
      
    </optgroup>
  </select>
</div>

      <div class="news-nav-desktop unit one-quarter hide-on-mobiles">
  <aside>
    <ul>
      <li class="">
        <a href="../../../../index.html">All News</a>
      </li>
      <li class="">
        <a href="../../../../releases/index.html">Frida Releases</a>
      </li>
    </ul>
    <h4>Recent Releases</h4>
    <ul>
      
      <li class="">
        <a href="../../../../2023/12/24/frida-16-1-10-released/index.html">Version 16.1.10</a>
      </li>
      
      <li class="">
        <a href="../../../../2023/12/20/frida-16-1-9-released/index.html">Version 16.1.9</a>
      </li>
      
      <li class="">
        <a href="../../../../2023/11/28/frida-16-1-8-released/index.html">Version 16.1.8</a>
      </li>
      
      <li class="">
        <a href="../../../../2023/11/16/frida-16-1-7-released/index.html">Version 16.1.7</a>
      </li>
      
      <li class="">
        <a href="../../../../2023/11/13/frida-16-1-6-released/index.html">Version 16.1.6</a>
      </li>
      
      <li>
        <a href="../../../../../docs/history/index.html">History »</a>
      </li>
    </ul>
    <h4>Other News</h4>
    <ul>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li class="">
          <a href="../../../../2019/05/15/nowsecure-connect-2019/index.html">NowSecure Connect 2019</a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li class="">
          <a href="../../../../2016/01/31/frida-fosdem-presentation/index.html">Frida presentation at FOSDEM 2016</a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </ul>
  </aside>
</div>


      <div class="news-articles unit three-quarters">
        <article>
  <h2>
    Frida 15.1 Released
    <a href="index.html" class="permalink" title="Permalink">∞</a>
  </h2>
  <span class="post-category">
    
    <span class="label">release</span>
    
  </span>
  <div class="post-meta">
    <span class="post-date">
      03 Sep 2021
    </span>
    <a href="https://github.com/hot3eed" class="post-author">
      <img src="https://github.com/hot3eed.png" class="avatar" />
      hot3eed
    </a>
  </div>
  <p class="post-content">
    <p>Introducing the <em>brand new</em> Swift bridge! Now that Swift has been
ABI-stable since version 5, this long-awaited bridge allows Frida to play nicely
with binaries written in Swift. Whether you <a href="https://youtu.be/0rHG_Pa86oA?t=36">consider</a> Swift a static or a
dynamic language, one thing is for sure, it just got a lot more dynamic with
this Frida release.</p>

<h2 id="metadata">Metadata</h2>

<p>Probably the first thing a reverser does when they start reversing a binary is
getting to know the different data structures that the binary defines. So it
made most sense to start by building the Swift equivalent of the <code class="language-plaintext highlighter-rouge">ObjC.classes</code>
and <code class="language-plaintext highlighter-rouge">ObjC.protocols</code> APIs. But since Swift has other first-class types,
i.e. structs and enums, and since the Swift runtime doesn’t offer reflection
primitives, at least not in the sense that Objective-C does, it meant we had to
dig a little deeper.</p>

<p>Luckily for us, the Swift compiler emits metadata for each type
defined by the binary. This metadata is bundled in a
<code class="language-plaintext highlighter-rouge">TargetTypeContextDescriptor</code> C++ struct, defined in
<a href="https://github.com/apple/swift/blob/52e852a7a9758e6edcb872761ab997b552eec565/include/swift/ABI/Metadata.h">include/swift/ABI/Metadata.h</a> at the time of writing. This data structure
includes the type name, its fields, its methods (if applicable,) and other useful
data depending on the type at hand. These data structures are pointed to by
relative pointers (defined in <a href="https://github.com/apple/swift/blob/52e852a7a9758e6edcb872761ab997b552eec565/include/swift/Basic/RelativePointer.h">include/swift/Basic/RelativePointer.h</a>.) In
Mach-O binaries, these are stored in the <code class="language-plaintext highlighter-rouge">__swift5_types</code> section.</p>

<p>So to dump types, Frida basically iterates over these data structures and
parses them along the way, very similar to what <a href="https://github.com/DerekSelander/dsdump">dsdump</a> does, except that you
don’t have to build the Swift compiler in order to tinker with it.</p>

<p>Frida also has the advantage of being able to probe into
internal Apple dylibs written in Swift, and that’s because we don’t need to
parse the <code class="language-plaintext highlighter-rouge">dyld_shared_cache</code> thanks to the private <code class="language-plaintext highlighter-rouge">getsectiondata</code> API, which
gives us section offsets hassle-free.</p>

<p>Once we have the metadata, we’re able to easily create JavaScript wrappers for
object instances and values of different types.</p>

<h2 id="conventions">Conventions</h2>

<p>To be on par with the Objective-C bridge, the Swift bridge has to support
calling Swift functions, which also proved to be not as straight forward.</p>

<p>Swift defines its own calling convention, <code class="language-plaintext highlighter-rouge">swiftcall</code>, which, to put it
succinctly, tries to be as efficient as possible. That means, not wasting load
and store instructions on structs that are smaller than 4 registers-worth of
size. That is, to pass those kinds of structs directly in registers. And since
that could quickly over-book our precious 8 argument registers
(on AARCH64 <code class="language-plaintext highlighter-rouge">x0</code>-<code class="language-plaintext highlighter-rouge">x7</code>), it doesn’t use the first register for the <code class="language-plaintext highlighter-rouge">self</code>
argument. It also defines an <code class="language-plaintext highlighter-rouge">error</code> register where callees can store errors
which they throw.</p>

<p>What we just described above is termed “physical lowering” in the Swift compiler
docs, and it’s implemented by the back-end, LLVM.</p>

<p>The process that precedes physical lowering is termed “semantic lowering,” which
is the compiler front-end figuring out who “owns” a value and whether
it’s direct or indirect. Some structs, even though they might be smaller than
4 registers, have to be passed indirectly, because, for example, they are
generic and thus their exact memory layout is not known at compile time, or
because they include a weak reference that has to be in-memory at all times.</p>

<p>We had to implement both semantic and physical lowering in order to be able
to call Swift functions. Physical lowering is implemented using JIT-compiled
adapter functions (thanks to the <code class="language-plaintext highlighter-rouge">Arm64Writer</code> API) that does the necessary
<code class="language-plaintext highlighter-rouge">SystemV</code>-<code class="language-plaintext highlighter-rouge">swiftcall</code> translation. Semantic lowering is implemented by utilizing
the type’s metadata to figure out whether we should pass a value directly or
not.</p>

<p>The compiler <a href="https://github.com/apple/swift/blob/52e852a7a9758e6edcb872761ab997b552eec565/docs/ABI/CallingConvention.rst">docs</a> are a great resource to learn more about the calling
convention.</p>

<h2 id="interception">Interception</h2>

<p>Because Swift passes structs directly in registers, there isn’t a 1-to-1 mapping
between registers and actual arguments.</p>

<p>And now that we have JavaScript wrappers for types, and are able to call Swift
functions from the JS runtime, a good next step would be extending <code class="language-plaintext highlighter-rouge">Interceptor</code>
to support Swift functions.</p>

<p>For functions that are not stripped, we use a simple regex to parse argument
types and names, same for return values. After parsing them we retrieve the
type metadata, figure out the type’s layout, then simply construct JS wrappers
for each argument, which we pass the Swift argument value, however many
registers it occupies.</p>

<h2 id="eof">EOF</h2>

<p>Note that the bridge is still very early in development, and so:</p>
<ul>
  <li>Currently supports Darwin arm64(e) only.</li>
  <li>Performance is not yet in tip-top shape, some edge case might not be handled
properly and some bugs are to be expected.</li>
  <li>There’s a chance the API might change in breaking ways in the
short-to-medium term.</li>
  <li>PRs and issues are very welcome!</li>
</ul>

<p>Refer to the <a href="https://github.com/frida/frida-swift-bridge/blob/master/docs/api.md">documentation</a> for an up-to-date resource on the current API.</p>

<p>Enjoy!</p>

<h3 id="changes-in-1510">Changes in 15.1.0</h3>

<ul>
  <li>Implement the Swift bridge, which allows Frida to:
    <ul>
      <li>Explore Swift modules along with types implemented in them, i.e. classes,
structs, enums and protocols.</li>
      <li>Create JavaScript wrappers for object instances and values.</li>
      <li>Invoke functions that use the <code class="language-plaintext highlighter-rouge">swiftcall</code> calling convention from the
JavaScript runtime.</li>
      <li>Intercept Swift functions and automatically parse their arguments and return
values.</li>
    </ul>
  </li>
  <li>Fix i/macOS regression where changes related to iOS 15 support ended up
breaking support for attaching to Apple system daemons.</li>
  <li>gadget: Add interaction.parameters in connect mode. These parameters are then
“reflected” into app’s info under <code class="language-plaintext highlighter-rouge">parameters.config</code>. Thanks <a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
</ul>

<h3 id="changes-in-1511">Changes in 15.1.1</h3>

<ul>
  <li>gumjs: Fix Swift lifetime logic in the V8 runtime.</li>
</ul>

<h3 id="changes-in-1512">Changes in 15.1.2</h3>

<ul>
  <li>control-service: Fix signal wiring, so signals such as Device.output get
emitted correctly by a remote frida-server. Thanks <a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
  <li>gadget: Fix the “runtime” option, which was forgotten during the refactorings
leading up to Frida 15.</li>
  <li>relocator: Optimize handling of x86 RIP relative code, by simply adjusting the
offset where possible.</li>
  <li>gumjs: Add ESM support, so tools like frida-compile can output better code.</li>
  <li>gumjs: Throw away source code after parsing it.</li>
  <li>gumjs: Plug leak when compiling to QuickJS bytecode.</li>
  <li>java: Expose JNIEnv-&gt;GetDirectBufferAddress. Thanks <a href="https://github.com/pandasauce">@pandasauce</a>!</li>
</ul>

<h3 id="changes-in-1513">Changes in 15.1.3</h3>

<ul>
  <li>objc: Fix the Proxy respondsToSelector implementation. Thanks <a href="https://github.com/hot3eed">@hot3eed</a>!</li>
  <li>gumjs: Fix V8 runtime crash when module is missing.</li>
  <li>gumjs: Emit V8 exceptions thrown by ESM entrypoints.</li>
</ul>

<h3 id="changes-in-1514">Changes in 15.1.4</h3>

<ul>
  <li>gumjs: Fix double-free related to weak ref callbacks in the QuickJS runtime.
Thanks <a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
  <li>gumjs: Ignore Interceptor context in unrelated NativeCallback invokes. In this
way invalid Interceptor contexts from higher up the call stack will be safely
ignored in favor of the minimal but correct callback context. Thanks
<a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
  <li>gumjs: Fix ESM module name normalization logic.</li>
  <li>gumjs: Add Process getters for cwd, home, and tmp dirs.</li>
  <li>swift: Improve metadata caching performance by ~3x. Thanks <a href="https://github.com/hot3eed">@hot3eed</a>!</li>
  <li>node: Publish Electron prebuilds for v15 instead of v13.</li>
</ul>

<h3 id="changes-in-1515">Changes in 15.1.5</h3>

<ul>
  <li>gumjs: Fix crash when QuickJS stringifies large numbers. Thanks
<a href="https://github.com/vfsfitvnm">@vfsfitvnm</a>!</li>
  <li>gumjs: Expose GError and GIConv to CModule. Thanks <a href="https://github.com/0xDC00">@0xDC00</a>!</li>
  <li>droidy: Support ADB server host/port environment variables. Thanks
<a href="https://github.com/amirpeles90">@amirpeles90</a>!</li>
  <li>swift: Improve load behavior on non-Darwin.</li>
</ul>

<h3 id="changes-in-1516">Changes in 15.1.6</h3>

<ul>
  <li>swift: Fix crash during load on non-Darwin. Thanks <a href="https://github.com/hot3eed">@hot3eed</a>!</li>
</ul>

<h3 id="changes-in-1517">Changes in 15.1.7</h3>

<ul>
  <li>swift: Fix CoreSymbolication integration on older OS versions. Thanks
<a href="https://github.com/hot3eed">@hot3eed</a>!</li>
  <li>python: Add setup.py download logic for Android/ARM. Our CI doesn’t yet build
and upload such a binary, though.</li>
</ul>

<h3 id="changes-in-1518">Changes in 15.1.8</h3>

<ul>
  <li>darwin: Add support for working in the SRD environment. Thanks <a href="https://github.com/Nessphoro">@Nessphoro</a>!</li>
  <li>darwin: Add support for building with newer iOS SDKs.</li>
</ul>

<h3 id="changes-in-1519">Changes in 15.1.9</h3>

<ul>
  <li>x86-relocator: Fix patching of RIP relative instructions. This was a
regression introduced in 15.1.2, resulting in Stalker becoming unreliable.</li>
  <li>portal-service: Always remove ClusterNode sessions whenever a session ID is
unset from PortalService. This avoids both NULL dereferences and leaks.
Thanks <a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
  <li>frida-portal: Fix typo in –help output.</li>
</ul>

<h3 id="changes-in-15110">Changes in 15.1.10</h3>

<ul>
  <li>p2p: Gracefully handle unsupported ICE candidates.</li>
  <li>p2p: Disable ICE-TCP for now.</li>
  <li>p2p: Rework PeerSocket to fix synchronization issues.</li>
  <li>socket: Fix WebService teardown.</li>
  <li>vala: Optimize server-side GDBus reply handling. This means our RPC and
network protocols become less chatty/more performant.</li>
  <li>x86-writer: Add UD2 instructions after/in indirect branches.</li>
  <li>x86-writer: Emit larger NOPs when possible.</li>
  <li>stalker: Improve performance of the x86/64 backend.</li>
  <li>objc-api-resolver: Guard against disposed ObjC classes. Thanks <a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
  <li>gumjs: Fix V8 Interceptor.{replace,revert}() regression. Thanks <a href="https://github.com/3vilWind">@3vilWind</a>!</li>
  <li>gumjs: Expand Instruction API w/ regsAccessed and operand.access. Thanks
<a href="https://github.com/3vilWind">@3vilWind</a>!</li>
</ul>

<h3 id="changes-in-15111">Changes in 15.1.11</h3>

<ul>
  <li>x86-writer: Add put_sahf() and put_lahf().</li>
  <li>x86-relocator: Fix handling of out-of-range Jcc branch targets. Thanks
<a href="https://github.com/0xDC00">@0xDC00</a>!</li>
  <li>stalker: Optimize target address retrieval.</li>
  <li>stalker: Avoid expensive XCHG instructions.</li>
  <li>stalker: Optimize IC prolog to use SAHF/LAHF.</li>
  <li>memory: Improve scan() to support regex patterns. Thanks <a href="https://github.com/hot3eed">@hot3eed</a>!</li>
  <li>kernel: Get base from all_image_info where supported. Thanks <a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
  <li>windows: Improve dbghelp backtracer reliability. Thanks <a href="https://github.com/HonicRoku">@HonicRoku</a>!</li>
</ul>

<h3 id="changes-in-15112">Changes in 15.1.12</h3>

<ul>
  <li>agent: Fix hang on unload w/ NO_REPLY_EXPECTED calls, where we would wait for
a reply to be sent. Due to the server-side DBus code being generated by the
Vala compiler, and it previously (in Frida &lt;= 15.1.9) ignoring
NO_REPLY_EXPECTED, this bug went unnoticed.</li>
  <li>android: Move to NDK r24 Beta 1.</li>
</ul>

<h3 id="changes-in-15113">Changes in 15.1.13</h3>

<ul>
  <li>linux: Improve module resolution on glibc systems.</li>
  <li>fruity: Fix spawn on dyld v4 case (jailed iOS 15.x). Thanks <a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
  <li>objc-api-resolver: Protect against objc_disposeClassPair() via mutex. Thanks
<a href="https://twitter.com/bezjaje">@mrmacete</a>!</li>
  <li>gumjs: Update Kernel.scan*() to match Memory.scan*(). Thanks <a href="https://github.com/hot3eed">@hot3eed</a>!</li>
  <li>stalker: Fix emitted branch op-code on x86.</li>
  <li>stalker: Fix handling of Thumb IT AL.</li>
  <li>stalker: Handle excluded Linux calls through PLT on x86.</li>
  <li>stalker: Fix Linux exception handling on x86.</li>
  <li>java: Add Java.backtrace(), without any API stability guarantees for now.</li>
</ul>

<h3 id="changes-in-15114">Changes in 15.1.14</h3>

<ul>
  <li>backtracer: Improve fuzzy backtracers to also include the immediate caller,
and avoid walking past stack end when known.</li>
  <li>windows: Implement Thread.try_get_ranges().</li>
  <li>linux: Implement Thread.try_get_ranges().</li>
  <li>ios: Check in with launchd on SRD systems.</li>
  <li>stalker: Fix accidental clobbery in call depth code on x86.</li>
  <li>node: Publish Node.js prebuilds for v17, too.</li>
</ul>


  </p>
</article>

      </div>

    </div>
  </section>


  <footer>
  <div class="grid">
    <div class="unit whole align-right center-on-mobiles">
      <div class="sponsored-by">
        <h5>Sponsored by:</h5>
        <a href="https://www.nowsecure.com">
          <img src="../../../../../img/nowsecure-logo.png" alt="NowSecure">
        </a>
      </div>
    </div>
  </div>
</footer>

  


  <!-- Google Analytics (http://google.com/analytics) -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46880695-1']);
    _gaq.push(['_setDomainName', 'https://frida.re']); // Multiple sub-domains
    _gaq.push(['_setAllowLinker', true]); // Multiple TLDs
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



</body>
</html>
